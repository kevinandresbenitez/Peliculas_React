var E=Object.defineProperty;var I=(e,t,a)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var j=(e,t,a)=>(I(e,typeof t!="symbol"?t+"":t,a),a);import{g as M,R as D,j as s,L as k,r as c}from"./index-6c4d57a1.js";const o=class o{static async searchMovies(t,a){let n=t?encodeURIComponent(t):o.DEFAULT_SEARCH,l=a?encodeURIComponent(a):o.DEFAULT_PAGE,d=await fetch(o.API+`&s=${n}&page=${l}`);return new Promise((f,u)=>{f(d)})}static async getDetailsById(t){if(t instanceof Number)return!1;let a=await fetch(o.API+`&i=${t}`);return new Promise((n,l)=>{n(a)})}};j(o,"API","https://www.omdbapi.com/?apikey=95ad37d6"),j(o,"DEFAULT_SEARCH","Batman"),j(o,"DEFAULT_PAGE",1);let _=o;var v={exports:{}},A="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",F=A,L=F;function b(){}function N(){}N.resetWarningCache=b;var w=function(){function e(n,l,d,f,u,m){if(m!==L){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:N,resetWarningCache:b};return a.PropTypes=a,a};v.exports=w();var B=v.exports;const i=M(B);function S(e){const t=D.createRef();function a(){let n=t.current.value;e.searchFunction(n.trim())}return s.jsxs("div",{className:"SearchBar",children:[s.jsx("h1",{className:"SearchBar__title",children:"Buscar Peliculas"}),s.jsx("input",{className:"SearchBar__input",placeholder:"Buscar...",ref:t,type:"text",id:"Buscador",onKeyUp:()=>{a()}})]})}S.propTypes={searchFunction:i.func.isRequired};function T(e){const t=()=>{e.pageCurrent>1&&e.searchFunction(e.textSearch,e.pageCurrent-1)},a=()=>{e.searchFunction(e.textSearch,e.pageCurrent+1)};return s.jsxs("div",{className:"Pagination",children:[e.pageCurrent>1?s.jsx("button",{className:"Pagination__prev",onClick:()=>{t()},children:"Anterior"}):!1,e.resultsNumber>e.pageCurrent*10?s.jsx("button",{className:"Pagination__next",onClick:()=>{a()},children:"Siguiente"}):!1]})}T.propTypes={searchFunction:i.func.isRequired,setPage:i.func.isRequired,resultsNumber:i.number.isRequired,pageCurrent:i.number.isRequired,textSearch:i.string.isRequired};const R="/assets/imagenNotFound-fde38369.jpg";function P(e){return s.jsxs("button",{className:"card",id:e.id,onClick:()=>{e.onClick(e.id)},children:[s.jsx("div",{className:"card__img__container",children:s.jsx("img",{className:"card__img",src:e.img&&e.img!=="N/A"?e.img:R,alt:"Imagen : "+e.id})}),s.jsxs("div",{className:"card__info",children:[s.jsx("strong",{children:s.jsx("p",{className:"card__info__title",children:e.title})}),s.jsx("div",{className:"card__info__extra",children:e.infoObject&&e.infoObject instanceof Object?Object.keys(e.infoObject).map((t,a)=>s.jsxs("p",{children:[t+":",e.infoObject[t]]},a)):!1})]})]})}P.propTypes={img:i.string,title:i.string,id:i.string.isRequired,infoObject:i.object,onClick:i.func};function C(e){return e.isLoaded?s.jsx("div",{className:"DarkScreen",children:s.jsxs("div",{className:"Modal",children:[s.jsx("button",{className:"Modal__close",onClick:()=>{e.onClick()},children:"X"}),s.jsx("div",{className:"Modal__img__container",children:s.jsx("img",{className:"Modal__img",src:e.img!=="N/A"?e.img:R,alt:"Poster"+e.id})}),s.jsxs("div",{className:"Modal__info",children:[s.jsx("h1",{className:"Modal__info__title",children:e.title}),s.jsx("div",{className:"Modal__info__extra",children:e.infoObject&&e.infoObject instanceof Object?Object.keys(e.infoObject).map((t,a)=>s.jsxs("p",{children:[s.jsx("strong",{children:t+":"}),e.infoObject[t]]},a)):!1})]})]})}):s.jsx("div",{className:"DarkScreen",children:s.jsx("div",{className:"Modal",children:s.jsx(k,{})})})}C.propTypes={img:i.string,title:i.string,id:i.string,infoObject:i.object,onClick:i.func,isLoaded:i.bool.isRequired};function O(e){const[t,a]=c.useState(!1),[n,l]=c.useState(!1),[d,f]=c.useState(!1),[u,m]=c.useState(!1),h=async r=>{if(f(!0),t==r)return m(!0),!1;l(!1),m(!1);const g=await _.getDetailsById(r),x=await g.json();if(!g.ok)return alert("Error de red"),!1;x&&(a(r),l(x),m(!0))};return s.jsxs("div",{className:"ListMovies",children:[s.jsx("div",{className:"container",children:e.movies&&e.movies.length>0?e.movies.map((r,g)=>s.jsx(P,{onClick:h,title:r.Title,id:r.imdbID,img:r.Poster,infoObject:{Año:r.Year,Tipo:r.Type}},r.imdbID)):!1}),d?s.jsx(C,{isLoaded:u,infoObject:{Tipo:n.Type,Año:n.Year,Pais:n.Country,Genero:n.Genre,Lenguaje:n.Language,Director:n.Director,Actores:n.Actors,Produccion:n.Production,Trama:n.Plot},onClick:()=>{f(!1)},id:n.imdbID,img:n.Poster,title:n.Title}):!1]})}O.propTypes={movies:i.array.isRequired};function $(){const[e,t]=c.useState([]),[a,n]=c.useState(null),[l,d]=c.useState(1),[f,u]=c.useState(null),[m,h]=c.useState(0);c.useEffect(()=>{r()},[]);const r=async(g="",x=1)=>{let y=await _.searchMovies(g,x),p=await y.json();if(!y.ok)return u("Error De Red"),!1;if(p.Response!="True")return u("No Se Encontraron Peliculas"),!1;d(x),n(g),t(p.Search),h(parseInt(p.totalResults)),u(null)};return s.jsxs("div",{className:"container",children:[s.jsx(S,{searchFunction:r}),s.jsx(O,{movies:e}),e&&e.length>0?s.jsx(T,{searchFunction:r,textSearch:a,resultsNumber:m,pageCurrent:l,setPage:d}):!1]})}export{$ as default};
